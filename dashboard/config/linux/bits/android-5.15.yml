# Copyright 2022 syzkaller project authors. All rights reserved.
# Use of this source code is governed by Apache 2 LICENSE that can be found in the LICENSE file.

# See https://source.android.com/setup/build/building-kernels
# for details on how to checkout and build Android kernel.

# Following branch: android13-5.15-lts
kernel:
 repo: https://android.googlesource.com/kernel/common
 tag: 889a0c39fef31

shell:
 - make gki_defconfig: [-cuttlefish]
 - cp /syzkaller/gopath/src/github.com/google/syzkaller/dashboard/config/android-modules/android-5.15/vd_x86_64_gki_defconfig arch/x86/configs/: [cuttlefish]
 - make vd_x86_64_gki_defconfig: [cuttlefish]

config:
  # TODO: KASAN_INLINE is broken for cuttlefish on android13-5.15. Remove -cuttlefish once fixed.
  - KASAN_INLINE: [override, -cuttlefish]
